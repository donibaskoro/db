<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Setting up a Django app on Heroku</title>
  <meta name="description" content="This is a simple guide to setting up a Django project on Heroku.">
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="/2017/03/04/settinging-up-django-with-heroku.html">
  <link rel="alternate" type="application/rss+xml" title="Brian Caffey" href="/feed.xml">
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-75060954-1', 'auto');
  ga('send', 'pageview');

</script>
  <body>
    <style>
    img{
      display:block;
      margin:auto;
    }
    </style>
    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Brian Caffey</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/contact">Contact</a>
          
        
          
          <a class="page-link" href="/blog">Blog</a>
          
        
          
        
          
        
          
        
          
        
          
          <a class="page-link" href="/projects/index.html">Projects</a>
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Setting up a Django app on Heroku</h1>
    <p class="post-meta"><time datetime="2017-03-04T00:00:00-06:00" itemprop="datePublished">Mar 4, 2017</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>This is a simple guide to setting up a Django project on Heroku.</p>

<p>The first step is to create a virutal environment in a new directory:</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> mkdir proj <span class="o">&amp;&amp;</span> <span class="nb">cd </span>proj
<span class="gp">$</span> virtualenv <span class="nt">-p</span> python3 <span class="nb">.</span>
<span class="gp">$</span> <span class="nb">source </span>bin/activate
<span class="gp">(proj) $</span> mkdir src
<span class="gp">(proj) $</span> <span class="nb">cd </span>src
<span class="gp">(proj) $</span> pip install <span class="nv">django</span><span class="o">==</span>1.10.5
<span class="gp">(proj) $</span> django-admin.py startproject myproj <span class="nb">.</span>
<span class="gp">(proj) $</span> <span class="nb">ls</span>
<span class="go">myproj        manage.py
</span></code></pre></div></div>

<p>This sets up a virtual environment and creates an empty Django project. The next step is to create a settings module.</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">(proj) $</span> <span class="nb">cd </span>myproj
<span class="gp">(proj) $</span> mkdir settings <span class="o">&amp;&amp;</span> <span class="nb">cd </span>settings
</code></pre></div></div>

<p>Next we want to add <code class="highlighter-rouge">__init__.py</code> to settings to make it a python module.</p>

<p><em>src/myproj/settings/<strong>init</strong>.py</em></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">.base</span> <span class="kn">import</span> <span class="o">*</span>

<span class="kn">from</span> <span class="nn">.production</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">try</span><span class="p">:</span>
	<span class="kn">from</span> <span class="nn">.local</span> <span class="kn">import</span> <span class="o">*</span>
<span class="k">except</span><span class="p">:</span>
	<span class="k">pass</span>
</code></pre></div></div>

<p>Next we want to change the <code class="highlighter-rouge">BASE_DIR</code> (base directory) in <code class="highlighter-rouge">settings.py</code>:</p>

<p><em>settings.py</em></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="o">...</span><span class="p">]</span>
<span class="c"># Build paths inside the project like this: os.path.join(BASE_DIR, ...)</span>
<span class="n">BASE_DIR</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">__file__</span><span class="p">))))</span>
<span class="p">[</span><span class="o">...</span><span class="p">]</span>
</code></pre></div></div>

<p>Next we need to move <code class="highlighter-rouge">settings.py</code> into the <code class="highlighter-rouge">settings</code> folder and rename it <code class="highlighter-rouge">base.py</code> and then copy <code class="highlighter-rouge">base.py</code> twice as <code class="highlighter-rouge">local.py</code> and <code class="highlighter-rouge">production.py</code> these three files will live in <code class="highlighter-rouge">settings</code>.</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">(proj) $</span> mv settings.py settings
<span class="gp">(proj) $</span> <span class="nb">cd </span>settings
<span class="gp">(proj) $</span> mv settings.py base.py
<span class="gp">(proj) $</span> cp base.py local.py
<span class="gp">(proj) $</span> cp base.py production.py
</code></pre></div></div>

<p>Next we need to install PostgreSQL:</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">(proj) $</span> pip install psycopg2
<span class="gp">(proj) $</span> pip install gunicorn dj-database-url
<span class="gp">(proj) $</span> pip install django-crispy-forms
<span class="gp">(proj) $</span> pip install pillow
</code></pre></div></div>

<p>At this point we can check to see if everything installed correctly:</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">(proj) $</span> pip freeze
<span class="go">appdirs==1.4.3
dj-database-url==0.4.2
Django==1.10.5
django-crispy-forms==1.6.1
gunicorn==19.7.1
olefile==0.44
packaging==16.8
Pillow==4.0.0
psycopg2==2.7.1
pyparsing==2.2.0
six==1.10.0
</span></code></pre></div></div>
<p>And then we can add these to a file in our base directory called <code class="highlighter-rouge">requirements.txt</code>:</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">(proj) $</span> pip freeze <span class="o">&gt;</span> requirements.txt
</code></pre></div></div>

<p>Next we can run migrations and create a superuser:</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">(proj) $</span> python manage.py migrate
<span class="gp">(proj) $</span> python manage.py createsuperuser
</code></pre></div></div>

<p>Next we need to initialize our git repository and create <code class="highlighter-rouge">.gitignore</code>:</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">(proj) $</span> git init
</code></pre></div></div>

<p>We can put <code class="highlighter-rouge">.gitignore</code> in our base directory and add the following:</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>myproj/settings/local.py
</code></pre></div></div>

<p>We also want to ignore several other python-related files in our directory. An easy way to do this is to add python gitignore. This can be found <a href="https://raw.githubusercontent.com/github/gitignore/master/Python.gitignore">here</a>.</p>

<p>Next we can make our first commit:</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">(proj) $</span> git add <span class="nt">--all</span>
<span class="gp">(proj) $</span> git commit <span class="nt">-m</span> <span class="s2">"initial commit"</span>
</code></pre></div></div>

<p>The next step involves setting up Heroku. First we need to create a <code class="highlighter-rouge">Procfile</code> in our base directory:</p>

<p><em>Procfile</em></p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>web: gunicorn myproj.wsgi --log-file -
</code></pre></div></div>

<p>Next we can try to run Heroku locally, but first we need to add <code class="highlighter-rouge">0.0.0.0</code> to <code class="highlighter-rouge">ALLOWED_HOSTS</code> in <code class="highlighter-rouge">production.py</code>, <code class="highlighter-rouge">base.py</code> and <code class="highlighter-rouge">local.py</code>.</p>

<p>We should now see “It worked!” at <code class="highlighter-rouge">0.0.0.0:5000</code>, which tells us that everything is working properly.</p>

<p>Next we need to create the project on Heroku:</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">(proj) $</span> heroku login
<span class="gp">(proj) $</span> heroku create my-unique-project-name-123
</code></pre></div></div>

<p>Now we can see our project at <code class="highlighter-rouge">my-unique-project-name-123.herokuapp.com</code>, and it should say <code class="highlighter-rouge">Heroku | Welcome to your new app!</code></p>

<p>Next we will want to add <code class="highlighter-rouge">my-unique-project-name-123.herokuapp.com</code> to <code class="highlighter-rouge">ALLOWED_HOSTS</code> in <code class="highlighter-rouge">settings.py</code>.</p>

<p>The very last step is to add the specific version of Python to a file called <code class="highlighter-rouge">runtime.txt</code> in our base directory:</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">(proj) $</span> python <span class="nt">-V</span>
<span class="go">Python 3.4.3
</span><span class="gp">(proj) $</span> <span class="nb">echo</span> <span class="s2">"python-3.4.3"</span> <span class="o">&gt;</span> runtime.txt
</code></pre></div></div>

<p>Before we push to Heroku we need to change a setting on Heroku related to static files:</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">(proj) $</span> heroku config:set <span class="nv">DISABLE_COLLECTSTATIC</span><span class="o">=</span>1
</code></pre></div></div>

<p>Now we can finally push the git repository to Heroku:</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">(proj) $</span> git push heroku master
</code></pre></div></div>

<p>Now if we go to our site on heroku we should see:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Not Found  

The requested URL / was not found on this server.
</code></pre></div></div>

<p>There is a helpful guide on deploying Python and Django apps on Heroku’s website <a href="https://devcenter.heroku.com/articles/deploying-python">here</a>.</p>

<p>Here’s an important excerpt regarding databases:</p>

<blockquote>
  <p>For Django applications, a Heroku Postgres hobby-dev database is automatically provisioned. This populates the DATABASE_URL environment variable.
No add-ons are automatically provisioned if a pure Python application is detected. If you need a SQL database for your app, add one explicitly:</p>
</blockquote>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> heroku addons:create heroku-postgresql:hobby-dev
</code></pre></div></div>

<p>So we need to run this command:</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">
</span><span class="gp">(proj) $</span> heroku addons:create heroku-postgresql:hobby-dev
<span class="go">
</span></code></pre></div></div>

<p>Next we need to access the terminal on our Heroku server:</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">(proj) $</span> heroku run bash
</code></pre></div></div>

<p>Next we need to add database-related information to <code class="highlighter-rouge">production.py</code> under the <code class="highlighter-rouge">DATABASES</code> section:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="o">...</span><span class="p">]</span>
<span class="kn">import</span> <span class="nn">dj_database_url</span>

<span class="n">db_from_env</span> <span class="o">=</span> <span class="n">dj_database_url</span><span class="o">.</span><span class="n">config</span><span class="p">()</span>
<span class="n">DATABASES</span><span class="p">[</span><span class="s">'default'</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">db_from_env</span><span class="p">)</span>
<span class="p">[</span><span class="o">...</span><span class="p">]</span>
</code></pre></div></div>

<p>Now we can push to Heroku:</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">(proj) $</span> git push heroku master
</code></pre></div></div>

<p>Next we can run our migrations:</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">(proj) $</span> heroku run python manage.py makemigrations
</code></pre></div></div>

<p>Next we can run <code class="highlighter-rouge">migrate</code> and <code class="highlighter-rouge">createsuperuser</code> on our Heroku server:</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">(proj) $</span> heroku run python manage.py migrate <span class="o">&amp;&amp;</span> heroku run python manage.py createsuperuser
</code></pre></div></div>

<p>Now we should be able to login to the admin page with the account we just created, but CSS is still not working at this point. Here’s how we configure static files to get CSS to work:</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">(proj) $</span> pip install whitenoise
</code></pre></div></div>

<p><code class="highlighter-rouge">whitenoise</code> is needed so Heroku can run our static files.</p>

<p>Next we want to make sure to include <code class="highlighter-rouge">whitenoise</code> in <code class="highlighter-rouge">requirements.txt</code>:</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">(proj) $</span> pip freeze <span class="o">&gt;</span> requirements.txt
</code></pre></div></div>

<p>Next we need to add the following item to the list of <code class="highlighter-rouge">MIDDLEWARE</code> components. This needs to be added to BOTH <code class="highlighter-rouge">production.py</code> AND <code class="highlighter-rouge">base.py</code> in order for the local files to show on both our heroku site and the locally served site with <code class="highlighter-rouge">heroku local web</code>:</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MIDDLEWARE = [
[...]
'whitenoise.middleware.WhiteNoiseMiddleware',
[...]
]
</code></pre></div></div>

<p>Next we have a few more items to add to our settings files:</p>

<p><em>production.py</em></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">STATICFILES_DIRS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s">"static"</span><span class="p">),</span>
<span class="p">)</span>

<span class="n">STATIC_ROOT</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s">"live-static"</span><span class="p">,</span> <span class="s">"static-root"</span><span class="p">)</span>

<span class="n">STATICFILES_STORAGE</span> <span class="o">=</span> <span class="s">'whitenoise.django.GzipManifestStaticFilesStorage'</span>

<span class="c">#STATIC_ROOT = "/home/cfedeploy/webapps/cfehome_static_root/"</span>

<span class="n">MEDIA_URL</span> <span class="o">=</span> <span class="s">"/media/"</span>

<span class="n">MEDIA_ROOT</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s">"live-static"</span><span class="p">,</span> <span class="s">"media-root"</span><span class="p">)</span>

</code></pre></div></div>

<p>And we also need to add some files to our base directory that will hold our static files:</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">(proj) $</span> mkdir static
<span class="gp">(proj) $</span> <span class="nb">echo</span> <span class="s2">"body {color:#000;}"</span> <span class="o">&gt;</span> static/main.css
<span class="gp">(proj) $</span> mkdir live-static
<span class="gp">(proj) $</span> mkdir live-static/static-root
<span class="gp">(proj) $</span> mkdir live-static/media-root
<span class="gp">(proj) $</span>
<span class="gp">(proj) $</span>
<span class="go">
</span></code></pre></div></div>

<p>And we also need to add the following to the end of <code class="highlighter-rouge">production.py</code>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="o">...</span><span class="p">]</span>
<span class="n">STATIC_URL</span> <span class="o">=</span> <span class="s">'/static/'</span>

<span class="n">STATICFILES_DIRS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s">"static"</span><span class="p">),</span>
<span class="p">)</span>

<span class="n">STATIC_ROOT</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s">"live-static"</span><span class="p">,</span> <span class="s">"static-root"</span><span class="p">)</span>

<span class="n">STATICFILES_STORAGE</span> <span class="o">=</span> <span class="s">'whitenoise.django.GzipManifestStaticFilesStorage'</span>

<span class="c">#STATIC_ROOT = "/home/cfedeploy/webapps/cfehome_static_root/"</span>

<span class="n">MEDIA_URL</span> <span class="o">=</span> <span class="s">"/media/"</span>

<span class="n">MEDIA_ROOT</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s">"live-static"</span><span class="p">,</span> <span class="s">"media-root"</span><span class="p">)</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">base.py</code> and <code class="highlighter-rouge">local.py</code> should have the following:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">STATIC_URL</span> <span class="o">=</span> <span class="s">'/static/'</span>

<span class="n">STATICFILES_DIRS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s">"static"</span><span class="p">),</span>
<span class="p">)</span>

<span class="n">STATIC_ROOT</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s">"live-static"</span><span class="p">,</span> <span class="s">"static-root"</span><span class="p">)</span>

<span class="n">MEDIA_URL</span> <span class="o">=</span> <span class="s">"/media/"</span>

<span class="n">MEDIA_ROOT</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s">"live-static"</span><span class="p">,</span> <span class="s">"media-root"</span><span class="p">)</span>
</code></pre></div></div>

<p>Next we want to run <code class="highlighter-rouge">collectstatic</code> locally:</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">(proj) $</span> python manage.py collectstatic
</code></pre></div></div>

<p>We also want to add a blank file to <code class="highlighter-rouge">live-static/media-root</code> so that it becomes tracked in git:</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">(proj) $</span> <span class="nb">echo</span> <span class="s2">"some text"</span> <span class="o">&gt;</span> live-static/media-root/blank.txt
</code></pre></div></div>

<p>Next we can commit these changes and push to Heroku, and check to see if the static files are working in the admin panel. We also want to set <code class="highlighter-rouge">DISABLE_COLLECTSTATIC</code> to <code class="highlighter-rouge">0</code>:</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">(proj) $</span> git add <span class="nt">--all</span>
<span class="gp">(proj) $</span> git commit <span class="nt">-m</span> <span class="s2">"added static files"</span>
<span class="gp">(proj) $</span> git push heroku master
<span class="gp">(proj) $</span> heroku config:set <span class="nv">DISABLE_COLLECTSTATIC</span><span class="o">=</span>0
</code></pre></div></div>
<p>Now we should be able to see the admin panel with working CSS on both the live and local heroku sites.</p>

<h1 id="adding-an-app-and-configuring-bootstrap">Adding an app and configuring Bootstrap</h1>

<p>Now that everything seems to be working we can start building our app.</p>

<p>Let’s start by creating a new app:</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">(proj) $</span> python manage.py startapp pages
</code></pre></div></div>

<p><code class="highlighter-rouge">pages</code> will be the name of an app that we create here.</p>

<p>In <code class="highlighter-rouge">pages/views.py</code> we can add a class-based view that will serve as the homepage:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span>
<span class="kn">from</span> <span class="nn">django.views.generic</span> <span class="kn">import</span> <span class="n">View</span>
<span class="c"># Create your views here.</span>

<span class="k">class</span> <span class="nc">HomeView</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
		<span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'pages/home.html'</span><span class="p">,</span> <span class="p">{})</span>

</code></pre></div></div>

<p>We then update <code class="highlighter-rouge">urls.py</code> to include our new view:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">services.views</span> <span class="kn">import</span> <span class="n">HomeView</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^admin/'</span><span class="p">,</span> <span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^$'</span><span class="p">,</span> <span class="n">HomeView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s">'home'</span><span class="p">),</span>
<span class="p">]</span>

</code></pre></div></div>
<p>Next we have to add <code class="highlighter-rouge">pages</code> to <code class="highlighter-rouge">INSTALLED_APPS</code> in both <code class="highlighter-rouge">production.py</code> and <code class="highlighter-rouge">local.py</code>.</p>

<p>Next we need to make some folders within our new <code class="highlighter-rouge">pages</code> app:</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">(proj) $</span> mkdir page/templates <span class="o">&amp;&amp;</span> <span class="nb">cd </span>pages/templates
<span class="gp">(proj) $</span> mkdir pages
<span class="gp">(proj) $</span> touch home.html
</code></pre></div></div>

<p>Then we need to add the following to <code class="highlighter-rouge">home.html</code>:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{% extends "base.html" %}

{% block content %}

{% endblock content%}
</code></pre></div></div>

<p>Next we need to update <code class="highlighter-rouge">DIR</code> in <code class="highlighter-rouge">TEMPLATES</code> in <code class="highlighter-rouge">base.py</code>, <code class="highlighter-rouge">local.py</code> and <code class="highlighter-rouge">production.py</code>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="o">...</span><span class="p">]</span>
<span class="s">'DIRS'</span><span class="p">:</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s">'templates'</span><span class="p">)],</span>
<span class="p">[</span><span class="o">...</span><span class="p">]</span>
</code></pre></div></div>
<p>Next we need to add a <code class="highlighter-rouge">templates</code> folder to the root of our project:</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">(proj) $</span> mkdir templates
<span class="gp">(proj) $</span> touch tempates/base.html
</code></pre></div></div>

<p>Next we can add a basic Bootstrap template to <code class="highlighter-rouge">base.html</code>:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"X-UA-Compatible"</span> <span class="na">content=</span><span class="s">"IE=edge"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags --&gt;</span>
    <span class="nt">&lt;title&gt;</span>Bootstrap 101 Template<span class="nt">&lt;/title&gt;</span>

	<span class="c">&lt;!-- Latest compiled and minified CSS --&gt;</span>
	<span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"</span> <span class="na">integrity=</span><span class="s">"sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"</span> <span class="na">crossorigin=</span><span class="s">"anonymous"</span><span class="nt">&gt;</span>

		<span class="c">&lt;!-- Optional theme --&gt;</span>
	<span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"</span> <span class="na">integrity=</span><span class="s">"sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp"</span> <span class="na">crossorigin=</span><span class="s">"anonymous"</span><span class="nt">&gt;</span>


    <span class="c">&lt;!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries --&gt;</span>
    <span class="c">&lt;!-- WARNING: Respond.js doesn't work if you view the page via file:// --&gt;</span>
    <span class="c">&lt;!--[if lt IE 9]&gt;
      &lt;script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"&gt;&lt;/script&gt;
      &lt;script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"&gt;&lt;/script&gt;
    &lt;![endif]--&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Hello, world!<span class="nt">&lt;/h1&gt;</span>

    <span class="c">&lt;!-- jQuery (necessary for Bootstrap's JavaScript plugins) --&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="c">&lt;!-- Include all compiled plugins (below), or include individual files as needed --&gt;</span>
    <span class="c">&lt;!-- Latest compiled and minified JavaScript --&gt;</span>
	<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"</span> <span class="na">integrity=</span><span class="s">"sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"</span> <span class="na">crossorigin=</span><span class="s">"anonymous"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<p>This html was taken from <a href="http://getbootstrap.com/getting-started/">Bootstrap’s ‘Get Started’ page</a>.</p>

<p>Now we can run <code class="highlighter-rouge">heroku local web</code> and confirm that we see “Hello, world!” from the Bootstrap template.</p>


  </div>

<!-- Add Disqus comments. -->
<div id="disqus_thread"></div>
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'briancaffey'; // required: replace example with your forum shortname
  var disqus_identifier = "/2017/03/04/settinging-up-django-with-heroku.html";

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Brian Caffey</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Brian Caffey</li>
          <li><a href="mailto:briancaffey2010@gmail.com">briancaffey2010@gmail.com</a></li>
          <li><a href="https://briancaffey.github.io">briancaffey.github.io</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/briancaffey">
    <span class="purple-icon icon--github">
        <svg viewBox="0 0 16 16">
    <path fill="#6e5494" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
</svg>
    </span>
    <span class="username">
        briancaffey
    </span>
</a>
          </li>
          
          
          <li>
            <a href="https://gitlab.com/briancaffey">
    <span class="gitlab-fox">
        
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="210px" height="194px" viewBox="0 0 210 194" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
    <!-- Generator: Sketch 3.3.2 (12043) - http://www.bohemiancoding.com/sketch -->
    <title>Group</title>
    <desc>Created with Sketch.</desc>
    <defs></defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">
        <g id="Fill-1-+-Group-24" sketch:type="MSLayerGroup">
            <g id="Group-24" sketch:type="MSShapeGroup">
                <g id="Group">
                    <path d="M105.0614,193.655 L105.0614,193.655 L143.7014,74.734 L66.4214,74.734 L105.0614,193.655 L105.0614,193.655 Z" id="Fill-4" fill="#E24329"></path>
                    <path id="Fill-6" fill="#FC6D26"></path>
                    <path d="M105.0614,193.6548 L66.4214,74.7338 L12.2684,74.7338 L105.0614,193.6548 Z" id="Fill-8" fill="#FC6D26"></path>
                    <path id="Fill-10" fill="#FC6D26"></path>
                    <path d="M12.2685,74.7341 L12.2685,74.7341 L0.5265,110.8731 C-0.5445,114.1691 0.6285,117.7801 3.4325,119.8171 L105.0615,193.6551 L12.2685,74.7341 Z" id="Fill-12" fill="#FCA326"></path>
                    <path id="Fill-14" fill="#FC6D26"></path>
                    <path d="M12.2685,74.7342 L66.4215,74.7342 L43.1485,3.1092 C41.9515,-0.5768 36.7375,-0.5758 35.5405,3.1092 L12.2685,74.7342 Z" id="Fill-16" fill="#E24329"></path>
                    <path d="M105.0614,193.6548 L143.7014,74.7338 L197.8544,74.7338 L105.0614,193.6548 Z" id="Fill-18" fill="#FC6D26"></path>
                    <path d="M197.8544,74.7341 L197.8544,74.7341 L209.5964,110.8731 C210.6674,114.1691 209.4944,117.7801 206.6904,119.8171 L105.0614,193.6551 L197.8544,74.7341 Z" id="Fill-20" fill="#FCA326"></path>
                    <path d="M197.8544,74.7342 L143.7014,74.7342 L166.9744,3.1092 C168.1714,-0.5768 173.3854,-0.5758 174.5824,3.1092 L197.8544,74.7342 Z" id="Fill-22" fill="#E24329"></path>
                </g>
            </g>
        </g>
    </g>
</svg>
    </span>
    <span class="username">
        briancaffey
    </span>
</a>
          </li>
          
          
          <li>
            <a href="https://twitter.com/briancaffey"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#00aced" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">briancaffey</span></a>

          </li>
          
          
          <li>
                <a href="https://www.linkedin.com/in/brian-caffey-06b22a18">
      <span class="icon  icon--linkedin">
        <svg viewBox="0 50 512 512" >
          <path fill="#828282" d="M150.65,100.682c0,27.992-22.508,50.683-50.273,50.683c-27.765,0-50.273-22.691-50.273-50.683
          C50.104,72.691,72.612,50,100.377,50C128.143,50,150.65,72.691,150.65,100.682z M143.294,187.333H58.277V462h85.017V187.333z
          M279.195,187.333h-81.541V462h81.541c0,0,0-101.877,0-144.181c0-38.624,17.779-61.615,51.807-61.615
          c31.268,0,46.289,22.071,46.289,61.615c0,39.545,0,144.181,0,144.181h84.605c0,0,0-100.344,0-173.915
          s-41.689-109.131-99.934-109.131s-82.768,45.369-82.768,45.369V187.333z"/>
        </svg>
      </span>
  
      <span class="username">Brian Caffey</span>
    </a>
          </li>
          
          
          <li>
            <a href="https://stackoverflow.com/users/6084948/briancaffey">
    <span class="so-icon icon--github">
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 120 120" style="enable-background:new 0 0 120 120;" xml:space="preserve">
<style type="text/css">
	.st0{fill:#BCBBBB;}
	.st1{fill:#F48023;}
</style>
<polygon class="st0" points="84.4,93.8 84.4,70.6 92.1,70.6 92.1,101.5 22.6,101.5 22.6,70.6 30.3,70.6 30.3,93.8 "/>
<path class="st1" d="M38.8,68.4l37.8,7.9l1.6-7.6l-37.8-7.9L38.8,68.4z M43.8,50.4l35,16.3l3.2-7l-35-16.4L43.8,50.4z M53.5,33.2
	l29.7,24.7l4.9-5.9L58.4,27.3L53.5,33.2z M72.7,14.9l-6.2,4.6l23,31l6.2-4.6L72.7,14.9z M38,86h38.6v-7.7H38V86z"/>
</svg>

    </span>
    <span class="username">
        briancaffey
    </span>
</a>
          </li>
          
        </ul>
      </div>
      
      <div class="footer-col footer-col-3">
        <p>my personal site</p>
      </div>
      
    </div>

  </div>

</footer>


  </body>

</html>
